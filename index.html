<!DOCTYPE html>
<html>
<head>
	<title>Cynthia 2.0</title>
	<link rel="stylesheet" href="styles/main.css"/>
	<link rel="stylesheet" href="styles/q42.css"/>
	
	<script src="js/libs/jquery.js"></script>
	<script src="js/libs/buffer-loader.js"></script>
</head>

<body>
<div id="debug">
<video id="webcam" autoplay width="640" height="480"></video>
<canvas id="canvas-source" width="640" height="480"></canvas>
<canvas id="canvas-blended"></canvas>
</div>

<div id="body">
	<div id="mask"></div>
	<div id="keuken">
		<div id="maskframe">
			<div id="webcam1"><video autoplay width=200 height=150></video></div>
			<div id="webcam2"><video autoplay width=200 height=150></video></div>
		</div>
	</div>
	<div id="mask"></div>
	<div id="mouth"></div>
</div>
<div id="mouth-eye1"></div>
<div id="mouth-eye2"></div>
<div id="mouth-lower"></div>
<div id="mouth-upper"></div>
<div id="arm"></div>

<script src="js/app.js"></script>

</body>
<script>
	document.getElementById("arm").addEventListener('webkitAnimationEnd', function(){
	    this.style.webkitAnimationName = '';
		document.body.className = "";
	}, false);

	document.body.onkeypress = function(){
	    document.getElementById("arm").style.webkitAnimationName = 'shake';
		document.body.className = "smile";
		audio().play();
	};
		
	var can = true;
	var sounds = [
		new Audio("audio/goedemorgen.wav"),
		new Audio("audio/hoihoi.wav")
		];
	var cd;
	
	function isMorning(){ return (cd = (new Date).getHours()) > 6 && cd < 10; }
	function audio(){
		return sounds[isMorning() ? 0 : 1];
	}
	
	function goedemorgen(){
	    if(can){
			document.getElementById("arm").style.webkitAnimationName = 'shake';
			document.body.className = "smile";
			audio().play();
			can = false;
			setTimeout(function(){
				can = true;
			}, 1000 * (isMorning() && 7 || 3*60) );
		}
	}
</script>
</html>